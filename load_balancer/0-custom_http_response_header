#!/bin/bash

# This script configures a new Ubuntu machine to add a custom Nginx response header

# Update and install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# Backup the original Nginx configuration file
sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak

# Add the custom header to the Nginx configuration
sudo sed -i '/http {/a \    add_header X-Served-By $hostname;' /etc/nginx/nginx.conf

# Restart Nginx to apply the changes
sudo systemctl restart nginx

# Verify the configuration
curl -sI localhost | grep X-Served-By
